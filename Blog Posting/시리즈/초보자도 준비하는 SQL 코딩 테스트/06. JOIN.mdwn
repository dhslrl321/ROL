# 목차

- JOIN
  - 조인이란?
  - 관계란?
  - 1:N 관계
- LEFT JOIN
- INNER JOIN
- OUTER JOIN

# 조인

JOIN은 SQL 코딩 테스트에서 출제 순위 1순위로 가장 가장 가장 중요하면서 어려운 부분이다.
사실상 지금까지 배웠던 것들이 이번 JOIN을 이용하기 위해서 배웠다고(물론 실제로 데이터베이스를 사용하는 소프트웨어 엔지니어링 입장에서 그 둘의 상관 관계는 크게 없지만) 해도 과언이 아니다.

## 조인이란?

지금까지 우리는 **하나의 테이블** 이를테면 `usertb1`이나 `buytb1`에서만 작업을 수행했었다.
하지만 지금 배울 JOIN은 **여러 개의 테이블**에서 작업을 수행할 수 있게 한다.

#### 즉, 두 개 이상의 테이블을 서로 **묶어서** 하나의 결과 집합으로 만들어내는 것이다.

이러한 조인을 이해하기 위해서 알아야할 것이 있다.

바로 **관계**이다.

## 관계란?

관계는 RDBMS 예를 들어 MySQL이나 MsSQL이나 Oracle과 같이 거의 대부분 사용되는 데이터베이스를 뜻한다.
이를 **관계형 데이터베이스**라고 하는데, 이 관계형 데이터베이스는 데이터베이스의 혁명이라고 불리기도 한다.
관계형 데이터베이스에서 사용되는 데이터들은 **모두 관계**를 맺고 있는데, 가장 대표적으로 다음과 같은 관계가 있다.

- 1:1
- 1:N **사용자 한 명은 여러 개의 상품을 구매할 수 있다.**
- N:M

이 모든 관계를 다루지는 않을 것이고 우리는 1:N 관계만 다룰 것이다.

> 만약 관계에 대해서 더 깊게 알고싶은 사람은 [위지원의 삽질 블로그 관계형 데이터베이스의 관계!를 알아보자](https://victorydntmd.tistory.com/30)에서 확인할 수 있다.
> 내가 공부할 떄 도움을 정말 많이 받은 아주 좋은 블로그이다.

## 1:N 관계

JOIN은 1:N 관계를 나타낼 수 있는 방법이다.
쿼리문까지 거의 다 왔다.
이론에서 조금만 참아보자.

우리가 샘플로 갖고있는 데이터베이스가 계속 말하는 것은 `한 명의 사용자는 여러 상품을 구매할 수 있다.`이다.
이 증거가 바로 buytb1에서 usertb1의 userid를 **외래키**로 갖고 있는 것이다.

> 만약 외래키에 대해서 알지 못한다면 [외래키 이해하기-비전공자를 위한 SQL](https://brunch.co.kr/@dan-kim/26)에서 확인할 수 있다.

#### 이 1:N 관계에서 우리가 할 수 있는 것은 usertb1의 userid를 가지고 해당 user가 구입한 모든 정보를 buytb1에서 가져와 출력할 수 있다는 것이다.

아까 앞에서 뭐라했는가? _JOIN은 두 개 이상의 테이블을 서로 **묶어서** 하나의 결과 집합으로 만들어내는 것이다._ 라고 했다.

이제 왜 JOIN을 써야하는지 또 어디서 써야하는지 알게 되었다.
그럼 **어떻게 써야 하는지**를 알아보자.

# INNER JOIN

INNER JOIN은 조인 중에서 **가장 많이 사용되는 조인**이다.

## 실제로 어떻게 사용될까?

실제로 JOIN은 어떻게 사용될까?

우리가 **쇼핑몰 사이트**를 운영한다고 생각해보자.
그리고 usertb1에는 사용자 정보가 담겨있고 buytb1에는 구매 정보가 담겨있다고 해보자.

> 만약 샘플 데이터가 없다거나, usertb1과 buytb1에 대해서 모른다면, [샘플 데이터 및 쿼리문]()에 가서 확인할 수 있습니다!

우리는 사용자들이 주문한 주문 목록을 토대로 배송을 해주려 한다.
우선 누가 무슨 상품을 구매했는지 확인하기 위해서 사용자가 구매한 모든 것을 출력해보자.

```sql
SELECT *
FROM buytb1;
```

자! 이제 배송을 해야 한다.

배송을 하긴 해야되는데 우리는 사용자에 대한 정보라곤 userid밖에 모른다.

그럼 어떻게 해야할까? **바로 JOIN**을 이 떄 사용하는 것이다.

INNER JOIN은 INNER JOIN 조건에 해당하는 모든 칼럼을 붙여 결과 테이블로 출력시켜 준다.

### INNER JOIN의 기본적인 사용법

```sql
SELECT 칼럼
FROM 테이블 1
  INNER JOIN 테이블 2
  ON 조인될 조건
[WHERE 검색 조건]
[GROUP BY]
[HAVING]
[ORDER BY]
```

여기서 조인될 조건은 buytb1에 있는 userid와 usertb1에 있는 userid가 같은 것들만 JOIN 한다.

우리는 사용자 이름으로 JOIN을 하고 있으니 ON에 대한 조건은 `buytb1.userid = usertb1.userid` 이다.

```sql
SELECT *
FROM buytb1
  INNER JOIN usertb1
  ON buytb1.userid = usertb1.userid;
```

# OUTER JOIN

# LEFT JOIN

- INNER JOIN + LEFT
- LEFT OUTER JOIN이라고도 함
- 어떤 특정한 테이블을 기준으로 데이터를 가져올 때
